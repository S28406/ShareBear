<Page x:Class="Pro.Client.Views.ToolDetailsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="ToolDetailsPage" Background="#F8FAFC">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <!-- TODO: Add an average rating -->
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
                <Button x:Name="BackButton"
                        Click="BackButton_Click"
                        Padding="12,6"
                        Background="#E7EDF4" Foreground="#0D141C"
                        BorderBrush="#CEDBE9" BorderThickness="1"
                        FontWeight="Bold"
                        Cursor="Hand">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="⟵" FontSize="14" Margin="0,0,6,0"/>
                        <TextBlock Text="Back to tools"/>
                    </StackPanel>
                </Button>
            </StackPanel>

            <Border Grid.Row="1" CornerRadius="10" Background="#E7EDF4" Padding="8">
                <Image x:Name="HeroImage" Height="280" Stretch="UniformToFill"/>
            </Border>

            <StackPanel Grid.Row="2" Margin="0,16,0,0">
                <TextBlock x:Name="ToolName" FontSize="28" FontWeight="Bold" Foreground="#0D141C"/>
                <TextBlock x:Name="CategoryName" FontSize="14" Foreground="#48739D" Margin="0,2,0,0"/>
                <TextBlock x:Name="OwnerName" FontSize="14" Foreground="#48739D"/>
            </StackPanel>
            <StackPanel Grid.Row="3" Margin="0,16,0,0">
                <DockPanel>
                    <TextBlock x:Name="PriceText" FontSize="18" Foreground="#0D141C" FontWeight="SemiBold" DockPanel.Dock="Left"/>
                </DockPanel>

                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                    <StackPanel Margin="0,0,12,0">
                        <TextBlock Text="Start date" Foreground="#48739D" />
                        <DatePicker x:Name="StartDatePicker" Width="150"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,12,0">
                        <TextBlock Text="End date" Foreground="#48739D" />
                        <DatePicker x:Name="EndDatePicker" Width="150"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,12,0">
                        <TextBlock Text="Qty" Foreground="#48739D" />
                        <TextBox x:Name="QuantityTextBox" Width="60" Text="1"/>
                    </StackPanel>

                    <Button Content="Rent Now"
                            Height="30" Width="140"
                            Background="#0B80F4" Foreground="White" FontWeight="Bold"
                            Click="RentButtonClick"/>
                </StackPanel>
            </StackPanel>

            <Grid Grid.Row="4" Margin="0,20,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,16,0">
                    <TextBlock Text="Description" FontSize="16" FontWeight="Bold" Foreground="#0D141C"/>
                    <TextBlock x:Name="DescriptionText" TextWrapping="Wrap" Foreground="#0D141C" Margin="0,6,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1">
                    <TextBlock Text="Customer Reviews" FontSize="16" FontWeight="Bold" Foreground="#0D141C"/>
                    <ItemsControl x:Name="ReviewsList" Margin="0,6,0,0">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="#CEDBE9" BorderThickness="1" CornerRadius="6" Padding="10" Margin="0,6,0,0" Background="White">
                                    <StackPanel>
                                        <TextBlock Text="{Binding User.Username}" FontWeight="SemiBold"/>
                                        <TextBlock Text="{Binding Rating, StringFormat=Rating: {0}/5}" Foreground="#0B80F4" Margin="0,2,0,0"/>
                                        <TextBlock Text="{Binding Description}" TextWrapping="Wrap" Foreground="#0D141C" Margin="0,4,0,0"/>
                                        <TextBlock Text="{Binding Date, StringFormat={}{0:yyyy-MM-dd}}" Foreground="#48739D" FontSize="12"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Grid>
        </Grid>
    </ScrollViewer>
</Page>
