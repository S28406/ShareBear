<Page x:Class="Pro.Client.Views.AdminUsersPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Admin - Users"
      Background="#F8FAFC">

    <Grid Background="#F8FAFC">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid Margin="24" MaxWidth="1100" HorizontalAlignment="Center">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,16">
                    <TextBlock Text="Admin • Users" FontSize="24" FontWeight="Bold"/>
                </StackPanel>

                <Border Grid.Row="1" Background="White" BorderBrush="#E7EDF4" BorderThickness="1" CornerRadius="12" Padding="16" Margin="0,0,0,16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="SearchBox" Height="32" Margin="0,0,12,0"
                                 VerticalContentAlignment="Center"
                                 KeyDown="SearchBox_KeyDown"/>

                        <Button Grid.Column="1" Content="Search" Click="Search_Click"
                                Background="#0B80F4" Foreground="White" Padding="16,6" Margin="0,0,8,0"/>

                        <Button Grid.Column="2" Content="Reset" Click="Reset_Click"
                                Background="#E7EDF4" Foreground="#0D141C" Padding="16,6"/>
                    </Grid>
                </Border>

                <Border Grid.Row="2" Background="White" BorderBrush="#E7EDF4" BorderThickness="1" CornerRadius="12" Padding="0">
                    <DataGrid x:Name="UsersGrid"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              HeadersVisibility="Column"
                              GridLinesVisibility="None"
                              RowHeaderWidth="0"
                              AlternationCount="2">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="200"/>
                            <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="*"/>

                            <DataGridTemplateColumn Header="Role" Width="170">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <ComboBox Width="150" Height="28"
                                                  ItemsSource="{Binding Roles}"
                                                  SelectedItem="{Binding SelectedRole, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="" Width="140">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="{Binding SaveButtonText}"
                                                IsEnabled="{Binding CanSave}"
                                                Click="SaveRole_Click"
                                                Padding="10,4"
                                                Background="#E7EDF4"
                                                Foreground="#0D141C"
                                                BorderBrush="#CEDBE9"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Border>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>