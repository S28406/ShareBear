<Window x:Class="Pro.Client.Views.LeaveReviewDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Leave a review"
        Width="520"
        Height="420"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#0B1220"
        TextElement.FontFamily="Segoe UI"
        TextElement.FontSize="13"
        TextElement.Foreground="#E5E7EB">

    <Window.Resources>
        <SolidColorBrush x:Key="PanelBg" Color="#111B2E"/>
        <SolidColorBrush x:Key="CardBg" Color="#0F1A2E"/>
        <SolidColorBrush x:Key="BorderC" Color="#24314D"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#9CA3AF"/>
        <SolidColorBrush x:Key="Accent" Color="#F97316"/>

        <Style x:Key="FieldLabel" TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>

        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="{StaticResource CardBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderC}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="#E5E7EB"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
        </Style>

        <Style x:Key="DarkComboBoxItem" TargetType="{x:Type ComboBoxItem}">
            <Setter Property="Background" Value="#0F1A2E"/>
            <Setter Property="Foreground" Value="#E5E7EB"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Style.Triggers>
                <Trigger Property="IsHighlighted" Value="True">
                    <Setter Property="Background" Value="#17233A"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#17233A"/>
                    <Setter Property="Foreground" Value="#E5E7EB"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="#17233A"/>
            <Setter Property="Foreground" Value="#E5E7EB"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderC}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="14,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="MinWidth" Value="92"/>
        </Style>

        <Style TargetType="{x:Type ComboBox}">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="MinWidth" Value="120"/>
            <Setter Property="Height" Value="38"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="Background" Value="{StaticResource CardBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderC}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="#E5E7EB"/>
            <Setter Property="ItemContainerStyle" Value="{StaticResource DarkComboBoxItem}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ComboBox}">
                        <Grid SnapsToDevicePixels="True">
                            <ToggleButton x:Name="ToggleButton"
                                          Focusable="False"
                                          ClickMode="Press"
                                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                                        <Border x:Name="Bd"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="8"
                                                Padding="{TemplateBinding Padding}">
                                            <DockPanel LastChildFill="True">
                                                <Border DockPanel.Dock="Right" Width="34" Background="Transparent">
                                                    <Path Fill="#9CA3AF"
                                                          Width="10" Height="6"
                                                          HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"
                                                          Data="M 0 0 L 4 4 L 8 0 Z"/>
                                                </Border>

                                                <ContentPresenter x:Name="ContentSite"
                                                                  VerticalAlignment="Center"
                                                                  HorizontalAlignment="Left"
                                                                  TextElement.Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ComboBox}}"
                                                                  Content="{Binding SelectionBoxItem, RelativeSource={RelativeSource AncestorType=ComboBox}}"
                                                                  ContentTemplate="{Binding SelectionBoxItemTemplate, RelativeSource={RelativeSource AncestorType=ComboBox}}"
                                                                  ContentTemplateSelector="{Binding ItemTemplateSelector, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                            </DockPanel>
                                        </Border>

                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="BorderBrush" Value="#334466"/>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="False">
                                                <Setter Property="Opacity" Value="0.55"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </ToggleButton.Template>

                                <ToggleButton.Background>
                                    <Binding Path="Background" RelativeSource="{RelativeSource AncestorType=ComboBox}"/>
                                </ToggleButton.Background>
                                <ToggleButton.BorderBrush>
                                    <Binding Path="BorderBrush" RelativeSource="{RelativeSource AncestorType=ComboBox}"/>
                                </ToggleButton.BorderBrush>
                                <ToggleButton.BorderThickness>
                                    <Binding Path="BorderThickness" RelativeSource="{RelativeSource AncestorType=ComboBox}"/>
                                </ToggleButton.BorderThickness>
                                <ToggleButton.Padding>
                                    <Binding Path="Padding" RelativeSource="{RelativeSource AncestorType=ComboBox}"/>
                                </ToggleButton.Padding>
                            </ToggleButton>

                            <Popup x:Name="PART_Popup"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   Placement="Bottom"
                                   StaysOpen="False"
                                   AllowsTransparency="True"
                                   Focusable="False"
                                   PopupAnimation="Fade"
                                   PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                <Border Background="{StaticResource CardBg}"
                                        BorderBrush="{StaticResource BorderC}"
                                        BorderThickness="1"
                                        CornerRadius="10"
                                        Padding="6"
                                        Width="{Binding ActualWidth, RelativeSource={RelativeSource TemplatedParent}}"
                                        SnapsToDevicePixels="True">
                                    <ScrollViewer MaxHeight="260"
                                                  Background="{StaticResource CardBg}"
                                                  CanContentScroll="True">
                                        <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained"/>
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="Foreground" Value="#0B1220"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="14,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="MinWidth" Value="92"/>
        </Style>
    </Window.Resources>

    <Border Background="{StaticResource PanelBg}"
            BorderBrush="{StaticResource BorderC}"
            BorderThickness="1"
            CornerRadius="14"
            Padding="18"
            Margin="14">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Margin="0,0,0,14">
                <TextBlock Text="Leave a review" FontSize="20" FontWeight="Bold"/>
                <TextBlock Text="Help others by sharing your experience"
                           Foreground="{StaticResource TextSecondary}"
                           Margin="0,4,0,0"/>
            </StackPanel>

            <StackPanel Grid.Row="1" Margin="0,0,0,12">
                <TextBlock Text="Rating" Style="{StaticResource FieldLabel}"/>
                <ComboBox x:Name="RatingBox" SelectedIndex="4">
                    <ComboBoxItem Content="1"/>
                    <ComboBoxItem Content="2"/>
                    <ComboBoxItem Content="3"/>
                    <ComboBoxItem Content="4"/>
                    <ComboBoxItem Content="5"/>
                </ComboBox>
            </StackPanel>

            <TextBlock Grid.Row="2" Text="Description" Style="{StaticResource FieldLabel}"/>

            <TextBox Grid.Row="3"
                     x:Name="DescBox"
                     Height="120"
                     VerticalAlignment="Stretch"
                     TextWrapping="Wrap"
                     AcceptsReturn="True"/>

            <StackPanel Grid.Row="4"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,16,0,0">
                <Button Content="Cancel"
                        Click="Cancel_Click"
                        Style="{StaticResource SecondaryButton}"
                        Margin="0,0,10,0"/>
                <Button Content="Submit"
                        Click="Submit_Click"
                        Style="{StaticResource PrimaryButton}"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
